<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/uploads/favicon.ico?v=5.1.1" />






<meta name="description" content="很鱼">
<meta property="og:type" content="website">
<meta property="og:title" content="无名小站">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="无名小站">
<meta property="og:description" content="很鱼">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="无名小站">
<meta name="twitter:description" content="很鱼">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>无名小站</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  















  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">无名小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">一个兴趣使然的无名小站</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2014/07/24/标准IO库缓冲区buffer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="y">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/sh.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无名小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/07/24/标准IO库缓冲区buffer/" itemprop="url">标准IO库缓冲区buffer</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-07-24T15:33:31+08:00">
                2014-07-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C-C/" itemprop="url" rel="index">
                    <span itemprop="name">C/C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>缓冲是标准IO库提供的，目的是尽可能的减少read、write系统调用的次数。</p>
<p>标准IO库提供了三种类型的缓冲：</p>
<ol>
<li>全缓冲：填满标准IO的缓冲区后才进行实际IO操作</li>
<li>行缓冲：当输入输出遇到换行符时，标准IO库执行IO操作。标准IO库用来收集每一行缓冲区的长度是固定的，所以只要填满了缓冲区，即使没有换行符，也执行IO操作</li>
<li>不带缓冲：标准出错流stderr不带缓冲</li>
</ol>
<p>一般来说：<br>标准出错流不带缓冲<br>打开至终端设备的流是行缓冲，比如执行./a.out<br>否则为全缓冲，比如将结果输出到文件./a.out &gt; tmp.out</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2014/07/24/php在Windows下获取文件夹和大文件大小/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="y">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/sh.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无名小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/07/24/php在Windows下获取文件夹和大文件大小/" itemprop="url">php在Windows下获取文件夹和大文件大小</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-07-24T10:28:46+08:00">
                2014-07-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/PHP/" itemprop="url" rel="index">
                    <span itemprop="name">PHP</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 得到文件夹大小，$dir = 'F:/wamp/www/folder';</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFolderSize</span><span class="params">($dir)</span></span></div><div class="line">&#123;</div><div class="line">    $obj = <span class="keyword">new</span> COM ( <span class="string">'scripting.filesystemobject'</span> );</div><div class="line">    <span class="keyword">if</span> ( is_object ( $obj ) )</div><div class="line">    &#123;</div><div class="line">        $ref = $obj-&gt;getfolder ( $dir );</div><div class="line">        $size = $ref-&gt;size;</div><div class="line">        $obj = <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">/*</span></div><div class="line">    else</div><div class="line">    &#123;</div><div class="line">        //echo 'can not create object';</div><div class="line">    &#125;</div><div class="line">    */</div><div class="line">    <span class="keyword">return</span> $size;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 获取大文件大小</span></div><div class="line"><span class="comment">/*</span></div><div class="line">$file = 'C:\\system_backup.zip';</div><div class="line">$size = real_filesize($file);</div><div class="line">echo "The size of the file is: $size";</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">real_filesize</span><span class="params">($file_path)</span></span></div><div class="line">&#123;</div><div class="line">    $fs = <span class="keyword">new</span> COM(<span class="string">"Scripting.FileSystemObject"</span>);</div><div class="line">    <span class="keyword">return</span> $fs-&gt;GetFile($file_path)-&gt;Size;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2014/07/23/Qt在各平台上的搭建qt-everywhere/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="y">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/sh.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无名小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/07/23/Qt在各平台上的搭建qt-everywhere/" itemprop="url">Qt在各平台上的搭建qt-everywhere</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-07-23T17:06:19+08:00">
                2014-07-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt/" itemprop="url" rel="index">
                    <span itemprop="name">Qt</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://download.qt.io/" target="_blank" rel="external">下载地址</a></p>
<p>当进入解压好的源码包后，使用./configure –help命令，可以获得相应帮助，前面是*号的表示默认参数. +号表示该功能要求被评估，评估成功后才能被接受</p>
<h2 id="Qt-for-windows7-64bit"><a href="#Qt-for-windows7-64bit" class="headerlink" title="Qt for windows7-64bit"></a>Qt for windows7-64bit</h2><p>在电脑上安装mingw（搜索mingw for windows），将C:\MinGW\bin添加进环境变量，打开命令行输入gcc –version和g++ –version和mingw32-make –version验证安装成功</p>
<p>解压qt-everywhere-opensource-src-4.8.1.tar.gz并进入目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">configure -debug-and-release -opensource -platform win32-g++ -webkit  （如果需要重新configure，运行mingw32-make confclean，然后重新configure）</div><div class="line">如果想使用VS的编译器，就指定-platform win32-msvc2013（VS2013版本）</div><div class="line">mingw32-make（如果是VS就是nmake，需要在VS2013开发人员命令提示中使用）</div><div class="line">如果指定了prefix路径输入：mingw32-make install</div></pre></td></tr></table></figure>
<p>把qt-everywhere-opensource-src-4.8.1/bin加入PATH</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">qmake –version</div><div class="line">mingw32-make docs 生成doc-build文件夹文档</div></pre></td></tr></table></figure>
<p>Qt已安装完毕，cmd命令行下使用如下命令生成可执行文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">qmake -project</div><div class="line">qmake</div><div class="line">mingw32-make // debug目录下生成可执行文件</div><div class="line">debug\文件名.exe</div></pre></td></tr></table></figure>
<p>如果是VS的编译器则使用qmake -r -spec win32-msvc2013然后执行nmake，需要在VS2013 开发人员命令提示中使用，或者qmake -r -spec win32-msvc2013 -tp vc生成vcxproj工程文件，双击打开，使用VS编译</p>
<p><a href="http://blog.csdn.net/sniper_bing/article/details/38067887" target="_blank" rel="external">Qt5.3.1 静态编译的configure</a></p>
<h2 id="Ubuntu-12-04-32bit-Linux-X11平台"><a href="#Ubuntu-12-04-32bit-Linux-X11平台" class="headerlink" title="Ubuntu 12.04-32bit Linux X11平台"></a>Ubuntu 12.04-32bit Linux X11平台</h2><p>用于X Window System（如Solaris、AIX、HP-UX、Linux、BSD）</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar zxvf qt-everywhere-opensource-src-4.8.1.tar.gz</div></pre></td></tr></table></figure>
<p>在./configure前主动装好下面3个包</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install libX11-dev libXext-dev libXtst-dev</div></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">./configure -debug -developer-build -opensource -shared -fast -no-multimedia -xmlpatterns -no-audio-backend -no-phonon -svg -no-webkit -javascript-jit -script -scripttools -declarative -declarative-debug -qt-zlib -qt-libtiff  -qt-libpng  -qt-libmng -no-openssl -verbose -optimized-qmake -no-xinerama -no-xvideo -no-xshape -no-xsync</div><div class="line">make</div><div class="line">make install</div></pre></td></tr></table></figure>
<p>Qt已安装完毕，使用如下命令生成可执行文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">/usr/<span class="built_in">local</span>/Trolltech/Qt-4.8.1/bin/qmake -project   // qmake默认安装路径</div><div class="line">/usr/<span class="built_in">local</span>/Trolltech/Qt-4.8.1/bin/qmake</div><div class="line">make</div><div class="line">./生成的可执行文件</div></pre></td></tr></table></figure>
<p><a href="http://www.cnblogs.com/emouse/archive/2013/01/28/2880142.html" target="_blank" rel="external">Linux下编译、安装、配置 QT</a></p>
<h2 id="嵌入式X86平台"><a href="#嵌入式X86平台" class="headerlink" title="嵌入式X86平台"></a>嵌入式X86平台</h2><p>可以通过编译移除不常使用的组件与功能。通过自己的视窗系统QWS，不需依赖X Window System，直接写入Linux帧缓冲。可以减少存储器消耗。并提供虚拟帧缓冲QVFB，方便在桌面系统上进行嵌入式测试。</p>
<p>解压qt-everywhere-opensource-src-4.8.1.tar.gz并进入</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">apt-get install qt4-dev-tools</div><div class="line">./configure -embedded x86 -qvfb -no-webkit</div><div class="line">make</div><div class="line">make install</div></pre></td></tr></table></figure>
<p>qt embedded x86被安装在/usr/local/Trolltech/QtEmbedded-4.8.1，里面的qmake, moc,uic等都是for embedded x86,用来编译embedded程序的</p>
<p>Qt已安装完毕，测试</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">/usr/<span class="built_in">local</span>/Trolltech/QtEmbedded-4.8.1/bin/qmake -project</div><div class="line">/usr/<span class="built_in">local</span>/Trolltech/QtEmbedded-4.8.1/bin/qmake</div><div class="line">make</div><div class="line">qvfb -width 800 -height 600 &amp;     // 打开qvfb用来显示程序</div><div class="line">./可执行文件名 -qws                 // 程序显示在qvfb上</div></pre></td></tr></table></figure>
<p>QT是基于C/S模型的，也就是客户端/服务器模型，QT如果需要运行图形界面程序就需要server端的支持。这个服务器端就是QWS Server。默认情况下，嵌入式端的系统是不会启动QWS Server的，所以如果只有一个图形界面程序，就必须给它加上-qws参数，让它以服务器的形式运行，这样才能启动QWS Server。</p>
<h2 id="嵌入式ARM平台"><a href="#嵌入式ARM平台" class="headerlink" title="嵌入式ARM平台"></a>嵌入式ARM平台</h2><p>先根据手册在linux上搭建mtk开发环境，安装好交叉编译工具（linux上有armv6z-mediatek451_001_vfp-linux-gnueabi-gcc这条命令）</p>
<p>解压qt-everywhere-opensource-src-4.8.1.tar.gz并进入</p>
<p>在qt-everywhere-opensource-src-4.8.1/mkspecs/qws/下创建armv6z-mediatek451_001_vfp-linux-gnueabi/文件夹，复制linux-arm-g++目录下的qplatformdefs.h和qmake.conf到armv6z-mediatek451_001_vfp-linux-gnueabi下，修改qmake.conf，在qmake.conf中加入如下两行</p>
<p>QT_CFLAGS_DIRECTFB = -I/opt/share/release/BDP_Linux/oss/library/DirectFB/usr    /include/directfb -D_REENTRANT</p>
<p>QT_LIBS_DIRECTFB = -L/opt/share/release/BDP_Linux/oss/library/DirectFB/lib -    ldirectfb -lfusion -ldirect -lpthread</p>
<p>（解压release/BDP_Linux/oss/library/DirectFB）</p>
<p>以下为qmake.conf文件内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"># qmake configuration for building with armv6z-mediatek-linux-gnueabi-g++</div><div class="line">include(../../common/linux.conf)</div><div class="line">include(../../common/gcc-base-unix.conf)</div><div class="line">include(../../common/g++-unix.conf)</div><div class="line">include(../../common/qws.conf)</div><div class="line"># modifications to g++.conf</div><div class="line">QMAKE_CC                = armv6z-mediatek451_001_vfp-linux-gnueabi-gcc</div><div class="line">QMAKE_CXX               = armv6z-mediatek451_001_vfp-linux-gnueabi-g++</div><div class="line">QMAKE_LINK              = armv6z-mediatek451_001_vfp-linux-gnueabi-g++</div><div class="line">QMAKE_LINK_SHLIB        = armv6z-mediatek451_001_vfp-linux-gnueabi-g++</div><div class="line"># modifications to linux.conf</div><div class="line">QMAKE_AR                = armv6z-mediatek451_001_vfp-linux-gnueabi-ar cqs</div><div class="line">QMAKE_OBJCOPY           = armv6z-mediatek451_001_vfp-linux-gnueabi-objcopy</div><div class="line">QMAKE_STRIP             = armv6z-mediatek451_001_vfp-linux-gnueabi-strip</div><div class="line">QT_CFLAGS_DIRECTFB = -I/opt/share/release/BDP_Linux/oss/library/DirectFB/usr    /include/directfb -D_REENTRANT</div><div class="line">QT_LIBS_DIRECTFB = -L/opt/share/release/BDP_Linux/oss/library/DirectFB/lib -    ldirectfb -lfusion -ldirect -lpthread</div><div class="line"></div><div class="line">load(qt_config)</div></pre></td></tr></table></figure>
<p>修改qt-everywhere-opensource-src-4.8.1/src/corelib/io/io.pri</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">linux-*|armv6z-*:&#123;     // linux-*后面加上|armv6z-*</div></pre></td></tr></table></figure>
<p>然后安装</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">./configure -release -embedded arm -fast -xplatform qws/armv6z-mediatek451_001_vfp-linux-gnueabi -v -developer-build -opensource -xmlpatterns -svg -no-webkit -javascript-jit -script -scripttools -declarative -optimized-qmake -reduce-relocations -exceptions -depths all -lrt -qt-zlib -qt-libtiff -qt-libpng -qt-libmng -qt-libjpeg -qt-freetype -no-dbus -nomake examples -nomake demos -nomake docs -nomake translations -no-largefile -no-phonon -no-phonon-backend -no-opengl -no-multimedia -no-audio-backend -no-declarative-debug -plugin-gfx-directfb -no-gfx-transformed -no-gfx-qvfb -no-gfx-vnc -no-gfx-multiscreen -no-gfx-qnx -no-gfx-integrityfb -little-endian -host-little-endian -qt-sql-sqlite -openssl-linked -I/home/release/BDP_Linux/oss/library/openssl/usr/include -L/home/release/BDP_Linux/oss/library/openssl/usr/lib -lssl -lcrypto -prefix /opt/share/qt-4.8.1-arm</div><div class="line">（记得解压release/BDP_Linux/oss/library/openssl，-I和-L路径可能有所不同（I=include ， L=library）</div></pre></td></tr></table></figure>
<p>-xplatform参数<br>QT使用qmake产生Makefile，为了让QT在不同平台下编译，QT预先定义一些平台Makefile变量。这一些变量根据编译平台不同，采用不同的值。如QMAKE_CC在ARM-LINUX下等于arm-linux-gcc，这一些变量都存在名为qmake.conf文件里。当qmake生成Makefile时，将采用这个文件的值。QT已经针对所有测试过的平台都写相应的qmake.conf，它全部放在QT目录下的mkspecs目录，其中针对QT窗口系统(QWS)的平台放在 mkspecs/qws下面。</p>
<p>-xplatform就是告诉configure，生成qt 4.8.1库的Makefile采用哪一个qmake.conf。</p>
<p>configure -xplatform qws/linux-arm-g++即表示采用 qws/linux-arm-g++的qmake.conf，而且这个格式很简单，所以如果有一个新的嵌入式平台，你完全可以在qws建个类似qmake.conf，只要用xplatform通知configure即可。但是目录名必须是 linux-XXXX-g++（所以上面的红字修改是因为我们的qmake.conf文件夹不是以linux开头）</p>
<p>-prefix 参数<br>Qt安装的路径</p>
<p>configure完成后根据提示</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gmake</div><div class="line">gmake install</div></pre></td></tr></table></figure>
<p>安装成功，测试</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">/qt-4.8.1-armv6z/bin/qmake -project</div><div class="line">/qt-4.8.1-armv6z/bin/qmake</div><div class="line">make</div></pre></td></tr></table></figure>
<p>交叉编译成功</p>
<p><a href="http://lanxinyuchs.iteye.com/blog/934967" target="_blank" rel="external">QT编译出错解决</a></p>
<p>搭建好nfs<br>将程序挂载到开发板上，命令为：mount -o nolock 192.168.100.182:/opt/nfs  /mnt/ubi_boot/nfs<br>nfs mount默认选项包括文件锁，依赖于portmap提供的动态端口分配功能，简单的解决方法：kill文件锁（lockd）或者mount -o nolock<br>-o options主要用来描述设备或档案的挂载方式，由于很多嵌入式设备的根文件系统中不带portmap，所以一般都使用-o nolock参数，即不使用NFS文件锁，这样就可以避免使用portmap。<br>挂载成功后将程序拷贝到/mnt/ubi_boot/main目录下，由于程序运行需要一些Qt库，需要显示到电视机（directfb），添加环境变量（可写成脚本执行，然后用source qtenv.sh命令使环境变量生效，echo $查看变量是否设置成功）</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">export</span> QTDIR=/</div><div class="line"><span class="built_in">export</span> QT_PLUGIN_PATH=<span class="variable">$QTDIR</span>/plugins/</div><div class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$QTDIR</span>/lib:/usr/lib:/usr/<span class="built_in">local</span>/lib:/mnt/ubi_boot/main</div><div class="line">然后执行程序 ./可执行文件名-qws -display directfb</div></pre></td></tr></table></figure>
<p><a href="http://blog.csdn.net/songjinshi/article/details/6554346" target="_blank" rel="external">QTE4.6移植以及相关参数介绍</a><br><a href="ttp://hi.baidu.com/deep_pro/item/fe01ecbd3fddc3d684dd7943" target="_blank" rel="external">qt embedded-linux 4.5.2＋arm移植开发环境搭建全攻略</a></p>
<h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><p><a href="http://blog.csdn.net/mociml/article/details/5317592" target="_blank" rel="external">Qt configure参数说明（中文）</a><br><a href="http://processors.wiki.ti.com/index.php/Building_Qt" target="_blank" rel="external">Building Qt</a><br><a href="http://blog.sina.com.cn/s/blog_8738908f0100u84l.html" target="_blank" rel="external">Qt4.7.4下单独编译QtWebkit</a><br><a href="http://blog.csdn.net/mybelief321/article/details/10137993" target="_blank" rel="external">Ubuntu12.04下配置安装Qt4.6.3及移植到mini2440开发板及其使用全过程</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2014/07/23/代码的编译连接与执行过程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="y">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/sh.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无名小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/07/23/代码的编译连接与执行过程/" itemprop="url">代码的编译连接与执行过程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-07-23T10:40:35+08:00">
                2014-07-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/基础/" itemprop="url" rel="index">
                    <span itemprop="name">基础</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p>一个源文件，经过编译系统的处理，生成目标文件的过程叫编译。a.cpp经过编译后在linux下会生成a.o这个目标文件。</p>
<p>目标文件主要用来描述程序在运行过程中需要放在内存中的内容，这些内容包括两大类——代码和数据。相应的目标文件也分成代码段和数据段。</p>
<p>代码段(.text)中的内容就是源文件中定义的一个个函数编译后得到的目标代码，a.o的代码段中应当包含main函数的代码。</p>
<p>数据段分为初始化的数据段(.data)和未初始化的数据段(.bss)。其中初始化的数据段中包括了那些在定义的同时设置了初值的静态生存期对象。其他静态生存期对象都放在未初始化的数据段中。</p>
<h2 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h2><p>连接期间，需要将各个编译单元的目标文件和运行库当中被调用过的单元加以合并。运行库实际上就是一个个目标代码文件的集合，运行库的各个组成部分a.o…这样的目标代码具有相同的结构。经过合并后，不同编译单元的代码段和两类数据段就分别合并到一起了，程序在运行时代码和静态数据需要占据的内存空间就全部已知了，因此所有代码和数据都可以被分配确定的地址了。</p>
<p>连接的对象出了用户源程序生成的目标文件外，还有系统的运行库。例如，执行输入输出功能，调用sin，fabs这类标准函数，此外，系统运行库中还包括程序的引导代码。在执行main函数之前，程序需要执行一些初始化工作，在main函数返回后，需要通知操作系统程序执行完毕，这些都由运行库中的代码完成。</p>
<p>连接后生成的可执行文件主体，和目标文件一样，也是各个段的信息，只是可执行文件的代码段中所有指令的地址，都是有效地址了。</p>
<h2 id="执行"><a href="#执行" class="headerlink" title="执行"></a>执行</h2><p>程序的执行以进程为单位，程序的一次动态执行过程称为一个进程。</p>
<p>程序是存储在磁盘上的，执行前，操作系统需要首先将它载入到内存中，并为它分配足够大的内存空间来容纳代码段和数据段，然后把文件中存放的代码段和初始化的数据段的内容载入其中。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2014/07/22/indent-C语言代码格式化工具/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="y">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/sh.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无名小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/07/22/indent-C语言代码格式化工具/" itemprop="url">indent-C语言代码格式化工具</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-07-22T09:22:15+08:00">
                2014-07-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C-C/" itemprop="url" rel="index">
                    <span itemprop="name">C/C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>indent可以让C代码格式化，更方便阅读</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>indent for Windows <a href="http://gnuwin32.sourceforge.net/packages/indent.htm" target="_blank" rel="external">下载地址</a><br>找到Download下载Complete package，然后安装<br>indent for Linux <a href="http://www.gnu.org/prep/ftp.html" target="_blank" rel="external">下载地址</a><br>在亚洲区中国有几个镜像，点进去找到indent然后下载最新版本.tar.gz</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">tar zxvf indent.tar.gz</div><div class="line"><span class="built_in">cd</span> indent</div><div class="line">./configure</div><div class="line">make（如果有错误output.c:26:26: error: static declaration of ‘output’ follows non-static declaration进入src目录找到output.c第26行删除static改成FILE * output = NULL;）</div><div class="line">make install</div></pre></td></tr></table></figure>
<h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><p>该工具通过终端运行，终端下输入</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">indent –kr –i8 test.c 代码使用K&amp;R风格，8个字节缩进</div></pre></td></tr></table></figure>
<p>（Windows用户打开cmd进入indent的bin目录，如果不想麻烦可以把;D:\indent\bin路径加入系统环境变量，以后就不需要每次进入工具目录了，win7右键计算机属性-高级系统设置-高级-环境变量，在系统变量下找到Path把路径添加进去即可）<br>格式化后的代码自动保存在test.c中，另外生成test.c~来保存原来的代码</p>
<p>格式化前：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;<span class="built_in">printf</span>(<span class="string">"hello\n"</span>);<span class="keyword">return</span> <span class="number">0</span>;&#125;</div></pre></td></tr></table></figure>
<p>格式化后：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"hello\n"</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><p>不同版本某些参数可能不同，详见文档<br>-bad或–blank-lines-after-declarations 　在声明区段或加上空白行。<br>-bap或–blank-lines-after-procedures 　在程序或加上空白行。<br>-bbb或–blank-lines-after-block-comments 　在注释区段后加上空白行。<br>-bc或–blank-lines-after-commas 　在声明区段中，若出现逗号即换行。<br>-bl或–braces-after-if-line 　if(或是else,for等等)与后面执行区段的”{“不同行，且”}”自成一行。<br>-bli&lt;缩排格数&gt;或–brace-indent&lt;缩排格数&gt; 　设置{ }缩排的格数。<br>-br或–braces-on-if-line 　if(或是else,for等等)与后面执行跛段的”{“不同行，且”}”自成一行。<br>-bs或–blank-before-sizeof 　在sizeof之后空一格。<br>-c&lt;栏数&gt;或–comment-indentation&lt;栏数&gt; 　将注释置于程序码右侧指定的栏位。<br>-cd&lt;栏数&gt;或–declaration-comment-column&lt;栏数&gt; 　将注释置于声明右侧指定的栏位。<br>-cdb或–comment-delimiters-on-blank-lines 　注释符号自成一行。<br>-ce或–cuddle-else 　将else置于”}”(if执行区段的结尾)之后。<br>-ci&lt;缩排格数&gt;或–continuation-indentation&lt;缩排格数&gt; 　叙述过长而换行时，指定换行后缩排的格数。<br>-cli&lt;缩排格数&gt;或–case-indentation-&lt;缩排格数&gt; 　使用case时，switch缩排的格数。<br>-cp&lt;栏数&gt;或-else-endif-column&lt;栏数&gt; 　将注释置于else与elseif叙述右侧定的栏位。<br>-cs或–space-after-cast 　在cast之后空一格。<br>-d&lt;缩排格数&gt;或-line-comments-indentation&lt;缩排格数&gt; 　针对不是放在程序码右侧的注释，设置其缩排格数。<br>-di&lt;栏数&gt;或–declaration-indentation&lt;栏数&gt; 　将声明区段的变量置于指定的栏位。<br>-fc1或–format-first-column-comments 　针对放在每行最前端的注释，设置其格式。<br>-fca或–format-all-comments 　设置所有注释的格式。<br>-gnu或–gnu-style 　指定使用GNU的格式，此为预设值。<br>-i&lt;格数&gt;或–indent-level&lt;格数&gt; 　设置缩排的格数。<br>-ip&lt;格数&gt;或–parameter-indentation&lt;格数&gt; 　设置参数的缩排格数。<br>-kr或–k-and-r-style 　指定使用Kernighan&amp;Ritchie的格式。<br>-lp或–continue-at-parentheses 　叙述过长而换行，且叙述中包含了括弧时，将括弧中的每行起始栏位内容垂直对其排列。<br>-nbad或–no-blank-lines-after-declarations 　在声明区段后不要加上空白行。<br>-nbap或–no-blank-lines-after-procedures 　在程序后不要加上空白行。<br>-nbbb或–no-blank-lines-after-block-comments 　在注释区段后不要加上空白行。<br>-nbc或–no-blank-lines-after-commas 　在声明区段中，即使出现逗号，仍旧不要换行。<br>-ncdb或–no-comment-delimiters-on-blank-lines 　注释符号不要自成一行。<br>-nce或–dont-cuddle-else 　不要将else置于”}”之后。<br>-ncs或–no-space-after-casts 　不要在cast之后空一格。<br>-nfc1或–dont-format-first-column-comments 　不要格式化放在每行最前端的注释。<br>-nfca或–dont-format-comments 　不要格式化任何的注释。<br>-nip或–no-parameter-indentation 　参数不要缩排。<br>-nlp或–dont-line-up-parentheses 　叙述过长而换行，且叙述中包含了括弧时，不用将括弧中的每行起始栏位垂直对其排列。<br>-npcs或–no-space-after-function-call-names 　在调用的函数名称之后，不要加上空格。<br>-npro或–ignore-profile 　不要读取indent的配置文件<br>-npsl或–dont-break-procedure-type 　程序类型与程序名称放在同一行。<br>-nsc或–dont-star-comments 　注解左侧不要加上星号(<em>)。<br>-nsob或–leave-optional-semicolon 　不用处理多余的空白行。<br>-nss或–dont-space-special-semicolon 　若for或while区段仅有一行时，在分号前不加上空格。<br>-nv或–no-verbosity 　不显示详细的信息。<br>-orig或–original 　使用Berkeley的格式。<br>-pcs或–space-after-procedure-calls 　在调用的函数名称与”{“之间加上空格。<br>-psl或–procnames-start-lines 　程序类型置于程序名称的前一行。<br>-sc或–start-left-side-of-comments 　在每行注释左侧加上星号(</em>)。<br>-sob或–swallow-optional-blank-lines 　删除多余的空白行。<br>-ss或–space-special-semicolon 　若for或swile区段今有一行时，在分号前加上空格。<br>-st或–standard-output 　将结果显示在标准输出设备。<br>-T 　数据类型名称缩排。<br>-ts&lt;格数&gt;或–tab-size&lt;格数&gt; 　设置tab的长度。<br>-v或–verbose 　执行时显示详细的信息。<br>-version 　显示版本信息。</p>
<p><a href="http://baike.baidu.com/link?url=pCO6WHfk5vggaX1-_opIyz1tkTmmbGpoVhWppfPAN_fCHtrp4Gm1YjX6ShXf7dRczASJqXRWD96XjHw0eXGxK_" target="_blank" rel="external">indent百度百科</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2014/07/16/原码反码补码/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="y">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/sh.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无名小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/07/16/原码反码补码/" itemprop="url">原码反码补码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-07-16T14:10:46+08:00">
                2014-07-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/基础/" itemprop="url" rel="index">
                    <span itemprop="name">基础</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="机器数和真值"><a href="#机器数和真值" class="headerlink" title="机器数和真值"></a>机器数和真值</h2><ol>
<li><p>机器数</p>
<p> 一个数在计算机中的二进制表示形式,  叫做这个数的机器数。机器数是带符号的，在计算机用一个数的最高位存放符号, 正数为0, 负数为1。比如，十进制中的数 +3 ，计算机字长为8位，转换成二进制就是00000011。如果是 -3 ，就是 10000011。那么，这里的 00000011 和 10000011 就是机器数。</p>
</li>
<li><p>真值</p>
<p> 因为第一位是符号位，所以机器数的形式值就不等于真正的数值。例如上面的有符号数 10000011，其最高位1代表负，其真正数值是 -3 而不是形式值131（10000011转换成十进制等于131）。所以，为区别起见，将带符号位的机器数对应的真正数值称为机器数的真值。<br> 例：0000 0001的真值 = +000 0001 = +1，1000 0001的真值 = –000 0001 = –1</p>
</li>
</ol>
<h2 id="原码-反码-补码的基础概念和计算方法"><a href="#原码-反码-补码的基础概念和计算方法" class="headerlink" title="原码, 反码, 补码的基础概念和计算方法"></a>原码, 反码, 补码的基础概念和计算方法</h2><p>在探求为何机器要使用补码之前, 让我们先了解原码, 反码和补码的概念。对于一个数, 计算机要使用一定的编码方式进行存储。 原码, 反码, 补码是机器存储一个具体数字的编码方式。</p>
<ol>
<li><p>原码</p>
<p> 原码就是符号位加上真值的绝对值, 即用第一位表示符号, 其余位表示值。 比如如果是8位二进制:<br> [+1]原 = 0000 0001<br> [-1]原 = 1000 0001<br> 第一位是符号位。 因为第一位是符号位, 所以8位二进制原码的取值范围就是:<br> [1111 1111 , 0111 1111]<br> 即[-127 , 127]<br> 数0的原码有两种形式：[+0]原=00000000B  [-0]原=10000000B<br> 原码是人脑最容易理解和计算的表示方式。</p>
</li>
<li><p>反码</p>
<p> 反码的表示方法是:<br> 正数的反码是其本身<br> 负数的反码是在其原码的基础上, 符号位不变，其余各个位取反。<br> [+1] = [00000001]原 = [00000001]反<br> [-1] = [10000001]原 = [11111110]反<br> 数0的反码也有两种形式，即[+0]反=00000000B [- 0]反=11111111B<br> 可见如果一个反码表示的是负数, 人脑无法直观的看出来它的数值。 通常要将其转换成原码再计算。<br> 8位二进制反码的表示范围：-127～+127</p>
</li>
<li><p>补码</p>
<p> 补码的表示方法是:<br> 正数的补码就是其本身<br> 负数的补码是在其原码的基础上, 符号位为“1”，并且，这个“1”既是符号位，也是数值位, 其余各位取反, 最后+1。 (即在反码的基础上+1包括符号位)<br> 0用[0000 0000]表示, 而以前出现问题的-0则不存在了。而且可以用[1000 0000]表示-128，在用补码运算的结果中, [1000 0000]补 就是-128。 但是注意因为实际上是使用以前的-0的补码来表示-128, 所以-128并没有原码和反码表示。(对-128的补码表示[1000 0000]补算出来的原码是[0000 0000]原, 这是不正确的)<br> [+1] = [00000001]原 = [00000001]反 = [00000001]补<br> [-1] = [10000001]原 = [11111110]反 = [11111111]补<br> 对于负数, 补码表示方式也是人脑无法直观看出其数值的。 通常也需要转换成原码在计算其数值。<br> 使用补码, 不仅仅修复了0的符号以及存在两个编码的问题, 而且还能够多表示一个最低数。 这就是为什么8位二进制, 使用原码或反码表示的范围为[-127, +127], 而使用补码表示的范围为[-128, 127]。</p>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2014/07/15/计算机基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="y">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/sh.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无名小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/07/15/计算机基础/" itemprop="url">计算机基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-07-15T14:31:17+08:00">
                2014-07-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/基础/" itemprop="url" rel="index">
                    <span itemprop="name">基础</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="x86架构"><a href="#x86架构" class="headerlink" title="x86架构"></a>x86架构</h2><p>最早的Intel发展出来的CPU代号称为8086，后来依此架构又开发出了80286、80386等，因此这种架构的CPU被称为x86架构，64位的CPU又被统称为x86_64架构。两大主流x86开发商（Intel，AMD）的CPU架构并不兼容，设计理念也有所区别，所以CPU所需要的主板芯片组与设计也就不太相同。</p>
<h2 id="芯片组"><a href="#芯片组" class="headerlink" title="芯片组"></a>芯片组</h2><p>主板上面最重要的就是芯片组，芯片组通常分为两个桥接器来控制各组件的通信<br>北桥负责连接速度较快的CPU、内存与显卡等组件<br>南桥负责连接速度较慢的周边接口，包括硬盘、USB、网卡等</p>
<h2 id="微指令集"><a href="#微指令集" class="headerlink" title="微指令集"></a>微指令集</h2><p>CPU内部包含有一些微指令集，我们所使用的软件都要经过CPU内部的微指令集来完成。这些微指令集的设计主要被分为两种设计理念，这就是目前世界上常见到的两种主要CPU种类，分别是精简指令集与复杂指令集。</p>
<p>精简指令集（ReducedInstruction Set Computing，RISC）<br>微指令集较为精简，每个指令的执行时间都很短，完成的操作也很单纯，指令的执行性能较佳；但是要做复杂的事，就要由多个指令来完成。常见的RISC微指令集的CPU主要有Sun公司的SPARC系列、IBM的PowerArchitecture（包括PowerPC）系列与ARM系列等。</p>
<p>复杂指令集（ComplexInstruction Set Computing，CISC）<br>CISC中，每条指令可以执行一些较低阶的硬件操作，指令书目多而且复杂，每条指令的长度并不相同，每条指令花费的时间较长，但每个指令可以处理的工作较为丰富。常见的CISC微指令集CPU主要有AMD、Intel、VIA等x86架构的CPU。</p>
<h2 id="CPU的性能"><a href="#CPU的性能" class="headerlink" title="CPU的性能"></a>CPU的性能</h2><p>不同的微指令集会导致CPU工作效率的优劣。</p>
<p>频率是指CPU每秒钟可以进行的工作次数（3.0GHz表示CPU在一秒内可以进行3.0*10^9次工作，每次工作都可以进行少数的指令运行，不同的CPU之间不能单纯以频率来判断运算性能，因为CPU的微指令集不相同，架构也不一样，每次频率能够进行的工作指令数也不同，所以频率目前仅能用来比较同款CPU速度）。</p>
<p>外频与倍频，所谓外频指的是CPU与外部组件进行数据传输/运算时的处理速度，倍频则是CPU内部用来加速工作性能的一个倍数，两者相乘才是CPU的频率（3.0GHz，外频是333MHz，因此倍频就是9倍3.0G=333M*9，其中1G=1000M）。</p>
<p>超频是指将CPU的倍频或是外频通过主板的设定功能更改成较高频率的一种方式，但倍频通常在出厂时已经被锁定而无法更改，因此较常被超频的为外频，超频并非正常速度，故可能死机。</p>
<p>CPU与内存通信速度靠的是外频，每次工作传送的数据量大小靠的是总线功能，一般芯片组分为北桥与南桥，北桥的总线称为系统总线，因为是内存传输的主要信道，所以速度较快；南桥就是所谓的输入输出（I/O）总线，主要用于联系硬盘、USB、网卡等接口设备。</p>
<p>字组大小是CPU每次能处理的数据量，字组大小依据CPU的设计有32位和64位，我们现在所称的计算机是32位或64位主要是依据CPU解析度字组大小而来，早期的32位CPU中，因为CPU每次能够解析的数据量有限，因此由内存传来的数据量就有所限制了，这也导致32位CPU最多支持最大到4GB的内存。</p>
<h2 id="内存"><a href="#内存" class="headerlink" title="内存"></a>内存</h2><p>内存主要组件为动态随机访问内存（DynamicRandom Access Memory，DRAM），只有在通电时才能记录与使用，断电后数据就消失了。<br>DRAM根据技术更新分好几代，使用广泛的有SDRAM与DDR SDRAM，DDR（DoubleData Rate）是双倍数据传送速度，它可以在一次工作周期中进行两次数据传送，类似CPU的倍率，DDR SDRAM依据技术的发展，有DDR,DDRII,DDR III等。</p>
<h2 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h2><p>操作系统是一组程序，这组程序的重点是管理计算机的所有活动以及驱动系统中的所有硬件。</p>
<h2 id="内核"><a href="#内核" class="headerlink" title="内核"></a>内核</h2><p>内核的作用在于让计算机所有硬件都可以运转，计算机能不能做到某些事情，都与内核有关。如果内核不支持TCP/IP协议，那么无论用什么网卡，内核都无法提供网络功能。内核程序所放置到内存中的区块是受保护的，并且开机后就一直常驻内存中。</p>
<p>既然硬件是由内核管理，那么如果想要开发软件的话，自然要去参考内核的相关功能。如此一来就是从原本的参考硬件函数变成参考内核功能。操作系统会提供一组开发接口给工程师来开发软件。操作系统就是内核与其提供的接口工具。</p>
<p>操作系统的内核层直接参考硬件规格写成，所以同一个操作系统不能够在不一样的硬件架构下运行。</p>
<p>操作系统只是在管理整个硬件资源。应用程序的开发都是参考操作系统提供的开发接口，所以该应用程序只能在该操作系统上运行。</p>
<h2 id="内核功能"><a href="#内核功能" class="headerlink" title="内核功能"></a>内核功能</h2><p>系统调用接口：方便开发者通过与内核的通信来利用硬件资源<br>程序管理：有效分配CPU资源<br>内存管理：通常内核会提供虚拟内存功能，当内存不足时可以提供内存交换功能<br>文件系统管理：数据输入输出等工作，文件格式的支持，Windows98不识别NTFS格式的磁盘<br>设备驱动：驱动程序</p>
<h2 id="分区"><a href="#分区" class="headerlink" title="分区"></a>分区</h2><p>数据的写入时在磁盘的盘片上面，盘片上又可细分出扇区(sector)与柱面(cylinder)两种单位（柱面是分区的最小单位），其中扇区每个为512bytes那么大。整块磁盘的第一个扇区特别重要，主要记录了两个重要信息：<br>主引导分区(MasterBoot Record, MBR):可以安装引导加载程序的地方，有446bytes<br>分区表(Partitiontable):记录整块磁盘分区的状态，有64bytes</p>
<p>在分区表所在的64bytes容量中，总共分为四组记录区，每组记录区记录了该区段的起始与结束的柱面号码。如果磁盘设备名为/dev/hda时，那么这四个分区文件名为/dev/hda[1-4]，数字与分区所在的位置有关，分区就是对64bytes的分区表进行设置，磁盘默认分区表仅能写入四组分区信息，这四组分区信息称为主(Priamry)或者扩展(Extended)分区。<br>通过扩展分区将硬盘分区成四个以上，既然第一个扇区所在的分区表只能记录四条数据，那我们可以利用额外的扇区来记录更多的分区信息。由扩展分区继续切割出来的分区被称为逻辑分区(logicalpartition)，逻辑分区的设备名称从5号开始(/dev/had5)。</p>
<p>主分区与扩展分区最多有四个（磁盘的限制）<br>扩展分区最多有一个（操作系统限制）<br>逻辑分区由扩展分区切割出来<br>主分区与逻辑分区可以被格式化，扩展分区无法被格式化<br>逻辑分区的数量依操作系统而不同，linux中，IDE硬盘最多有59个逻辑分区（5-63号），SATA硬盘则有11个（5-15号）</p>
<h2 id="BIOS和CMOS"><a href="#BIOS和CMOS" class="headerlink" title="BIOS和CMOS"></a>BIOS和CMOS</h2><p>BIOS是一套程序，这套程序是写死到主板上面的一个内存芯片中，这个内存芯片在没有通电时也能将数据记录下来，那就是只读存储器ROM。</p>
<p>CMOS是记录各项硬件参数且嵌入在主板上面的存储器，BIOS则是一个写入到主板上的一个韧体（韧体就是写入到硬件上的一个软件程序），BOIS就是在开机的时候计算机会主动执行的第一个程序了。接下来BOIS会分析计算机里面有哪些存储设备，以硬盘为例，BOIS会依据用户设置去取得能够开机的硬盘，并且到该硬盘里面去读取第一个扇区的主引导分区(MBR)位置，MBR这个仅有446bytes的硬盘容量里面会放置最基本的引导加载程序(Bootloader)，此时BOIS功成圆满，接下来就是MBR内的引导加载程序的工作了。这个引导加载程序的目的是在加载内核文件，由于引导加载程序是操作系统在安装的时候提供的，所以它会识别硬盘内的文件系统格式，因此就能够读取内核文件，接下来就是内核文件的工作，引导加载程序也功成圆满。</p>
<h2 id="Boot-loader"><a href="#Boot-loader" class="headerlink" title="Boot loader"></a>Boot loader</h2><p>BOIS和MBR都是硬件本身会支持的功能，至于Bootloader则是操作系统安装在MBR上面的一套软件了，由于MBR仅有446bytes，因此这个Bootloader是非常小而完美的。</p>
<p>Boot loader的主要任务：<br>提供菜单：用户可以选择不同的开机选项，这也是多重引导的重要功能。<br>载入内核文件：直接指向可开机的程序区段来开始操作系统。<br>转交其他loader：将引导加载功能转交给其他loader负责。（表示计算机系统里面可能具有两个以上的引导加载程序，硬盘只有一个MBR，但是引导加载程序出了可以安装在MBR之外，还可以安装在每个分区的引导扇区(bootsector)，这个特色造就了多重引导功能。例如MBR内安装的是可同时识别Windows和Linux操作系统的引导加载程序，那么它将提供两个菜单，菜单一可直接加载Windows的内核文件开机，菜单二则是将引导加载工作交给第二个分区的启动扇区，也就是交给了第二个分区的引导加载程序，第二个分区的引导加载程序启动后，该引导加载程序内仅有一个开机菜单，因此就能够使用Linux的内核文件开机）</p>
<p>每个分区都拥有自己的启动扇区(bootsector)；实际可开机的内核文件时放置到各分区内的；loader只会认识自己的系统分区内的可开机内核文件，以及其他loader；loader可直接指向或者是间接将管理权转交给另一个管理程序。</p>
<p>最好先安装Windows再安装Linux<br>Linux在安装的时候，可以选择将引导加载程序安装在MBR或个别分区的启动扇区，而且Linux的loader可以手动设置菜单，所以可以在Linux的bootloader里面添加Windows的开机选项。<br>Windows在安装的时候，它的安装程序会主动覆盖掉MBR以及自己所在分区的启动扇区，你没有选择的机会，而且它没有让我们自己选择菜单的功能。<br>如果先装Linux再安装Windows的话，那MBR的引导加载程序就会只有Windows的选项，原本在MBR内的Linux的引导加载程序就会被覆盖掉，但是不需要重新装Linux，只要用尽方法来处理MBR的内容即可（例如使用spfdisk软件，或者Linux的救援模式来挽救MBR）。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/sh.png"
               alt="y" />
          <p class="site-author-name" itemprop="name">y</p>
           
              <p class="site-description motion-element" itemprop="description">很鱼</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/forzxy" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/ywine" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">y</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
